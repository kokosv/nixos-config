{ config, pkgs, lib, ... }:

let
  super = "Mod4";
  alt_L = "Mod1";
  alt_R = "Mod3";
  enter = "Return";
in {
  xsession.windowManager.i3 = {
    enable = true;
    config = {
      startup = [{ 
        command = "i3-msg workspace 1";
        always = true; 
      }];

      fonts = {
        names = [ "DepartureMono Nerd Font" ];
        size = 11.0;
      };

      bars = [{
        position = "top";
        statusCommand = "${pkgs.i3blocks}/bin/i3blocks";
        fonts = {
          names = [ "DepartureMono Nerd Font" ];
          size = 11.0;
        };
      }];

      keybindings = lib.mkOptionDefault {
        "${super}" = "exec rofi -show drun";
        "${alt_L}+${enter}" = "exec kitty";

        "${alt_L}+Shift+l" = "exec systemctl --user restart greetd";
        "${alt_L}+Shift+k" = "kill";

        "${alt_L}+h" = "focus left";
        "${alt_L}+t" = "focus down";
        "${alt_L}+n" = "focus up";
        "${alt_L}+s" = "focus right";

        "${alt_L}+Shift+h" = "move left";
        "${alt_L}+Shift+t" = "move down";
        "${alt_L}+Shift+n" = "move up";
        "${alt_L}+Shift+s" = "move right";
      };
    };
  };
}
